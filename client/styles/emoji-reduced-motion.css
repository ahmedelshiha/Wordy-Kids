/**
 * Reduced Motion Support for Emoji Animations
 * Respects user preferences for reduced motion and provides accessible alternatives
 */

/* Base reduced motion utility class */
.motion-reduce {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Respect user's reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  
  /* Disable all emoji animations */
  .emoji,
  .emoji-inline,
  .emoji-block,
  .emoji-large,
  .emoji-xlarge,
  .emoji-navigation,
  .jungle-nav-emoji,
  .achievement-emoji,
  .game-emoji,
  .emoji-optimized {
    animation: none !important;
    transition: transform 0.1s ease-out, opacity 0.1s ease-out !important;
  }

  /* Reduce complex transforms to simple opacity changes */
  .jungle-nav-emoji:hover,
  .game-emoji:hover {
    transform: none !important;
    opacity: 0.8;
  }

  .achievement-emoji {
    animation: none !important;
    filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
  }

  /* Simplify interactive feedback */
  .emoji-interactive:hover,
  .emoji-interactive:focus {
    transform: none !important;
    outline: 2px solid #4f46e5;
    outline-offset: 2px;
  }

  .emoji-interactive:active {
    transform: none !important;
    opacity: 0.7;
  }

  /* Disable floating and movement animations */
  .animate-gentle-float,
  .animate-kid-float,
  .animate-kid-float-delayed,
  .animate-sparkle,
  .animate-wiggle,
  .animate-bounce,
  .animate-pulse,
  .animate-gentle-bounce,
  .animate-sway,
  .animate-gentle-emoji-float {
    animation: none !important;
  }

  /* Disable complex keyframe animations */
  .animate-jungle-glow,
  .animate-jungle-float,
  .animate-jungle-sway,
  .animate-jungle-sparkle,
  .animate-jungle-celebration,
  .animate-jungle-level-up {
    animation: none !important;
  }

  /* Simplify Twemoji animations */
  .twemoji {
    transition: opacity 0.1s ease-out !important;
  }

  .twemoji:hover {
    opacity: 0.8;
  }

  /* Disable placeholder animations */
  .emoji-placeholder,
  .nav-emoji-placeholder,
  .achievement-placeholder,
  .emoji-grid-placeholder {
    animation: none !important;
    background: #e5e7eb !important;
  }

  /* Simplify loading states */
  .lazy-emoji-container .animate-pulse {
    animation: none !important;
    opacity: 0.6;
  }

  /* Navigation specific adjustments */
  .jungle-nav-emoji {
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  .jungle-nav-emoji:focus,
  .jungle-nav-emoji[aria-current="page"] {
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
    background: rgba(251, 191, 36, 0.1);
    border-radius: 4px;
  }

  /* Achievement specific adjustments */
  .achievement-emoji[data-unlocked="true"] {
    filter: brightness(1.1) drop-shadow(0 2px 8px rgba(255, 215, 0, 0.4));
  }

  .achievement-emoji[data-unlocked="false"] {
    filter: grayscale(1) opacity(0.5);
  }

  /* Game emoji adjustments */
  .game-emoji:focus {
    outline: 2px solid #10b981;
    outline-offset: 2px;
    background: rgba(16, 185, 129, 0.1);
    border-radius: 4px;
  }

  /* Emoji list and grid adjustments */
  .emoji-list-item:focus,
  .emoji-grid-item:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 4px;
  }

  /* Disable complex gradient animations */
  .animate-rainbow,
  .animate-kid-rainbow,
  .border-rainbow {
    animation: none !important;
    border-color: #6b7280 !important;
  }

  /* Simplify particle effects */
  .emoji-particles,
  .celebration-particles {
    display: none !important;
  }

  /* Alternative visual feedback for disabled animations */
  .emoji-success-feedback {
    background: #dcfce7 !important;
    border: 2px solid #16a34a !important;
    border-radius: 6px;
    padding: 2px;
  }

  .emoji-error-feedback {
    background: #fef2f2 !important;
    border: 2px solid #dc2626 !important;
    border-radius: 6px;
    padding: 2px;
  }

  .emoji-info-feedback {
    background: #eff6ff !important;
    border: 2px solid #2563eb !important;
    border-radius: 6px;
    padding: 2px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .emoji,
  .twemoji {
    filter: contrast(1.3) !important;
  }

  .emoji-placeholder,
  .nav-emoji-placeholder,
  .achievement-placeholder {
    background: #000000 !important;
    border: 2px solid #ffffff !important;
  }

  .emoji-fallback {
    background: #ffffff !important;
    color: #000000 !important;
    border: 2px solid #000000 !important;
  }

  /* Enhanced focus indicators for high contrast */
  .emoji-interactive:focus,
  .jungle-nav-emoji:focus,
  .achievement-emoji:focus,
  .game-emoji:focus {
    outline: 4px solid #ffffff !important;
    outline-offset: 2px;
    background: #000000 !important;
  }
}

/* Forced colors mode (Windows High Contrast) */
@media (forced-colors: active) {
  .emoji,
  .twemoji {
    forced-color-adjust: none;
  }

  .emoji-placeholder,
  .nav-emoji-placeholder,
  .achievement-placeholder {
    background: ButtonFace !important;
    border: 2px solid ButtonText !important;
  }

  .emoji-interactive:focus {
    outline: 2px solid Highlight !important;
    background: HighlightText !important;
  }
}

/* Custom reduced motion classes for granular control */
.emoji-no-animation {
  animation: none !important;
  transition: opacity 0.1s ease-out !important;
}

.emoji-simple-hover:hover {
  opacity: 0.8;
  transition: opacity 0.1s ease-out;
}

.emoji-focus-only:focus {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

/* Accessibility helper classes */
.emoji-reduced-motion-safe {
  animation-duration: 0.1s !important;
  animation-iteration-count: 1 !important;
  animation-fill-mode: forwards !important;
}

.emoji-essential-motion-only {
  /* Only allow essential motion for functionality */
  transition: opacity 0.2s ease-out, transform 0.1s ease-out !important;
}

.emoji-no-transform {
  transform: none !important;
}

/* Screen reader specific optimizations */
@media (prefers-reduced-motion: reduce) {
  /* Ensure screen reader announcements are not interrupted by animations */
  [aria-live] .emoji,
  [role="alert"] .emoji,
  [role="status"] .emoji {
    animation: none !important;
    transition: none !important;
  }

  /* Simplify complex layouts for screen readers */
  .emoji-complex-layout {
    display: block !important;
    float: none !important;
    position: static !important;
  }
}

/* Performance optimizations for reduced motion */
@media (prefers-reduced-motion: reduce) {
  /* Disable hardware acceleration when animations are disabled */
  .emoji-optimized,
  .hardware-accelerated {
    will-change: auto !important;
    transform: none !important;
    -webkit-transform: none !important;
    -webkit-backface-visibility: visible !important;
    backface-visibility: visible !important;
  }

  /* Reduce repaints and reflows */
  .emoji-performance-optimized {
    contain: layout style !important;
  }
}

/* Alternative visual feedback for users who prefer reduced motion */
.emoji-static-feedback {
  position: relative;
}

.emoji-static-feedback::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border: 2px solid transparent;
  border-radius: 6px;
  transition: border-color 0.1s ease-out;
  pointer-events: none;
}

.emoji-static-feedback:hover::after,
.emoji-static-feedback:focus::after {
  border-color: #3b82f6;
}

.emoji-static-feedback[data-state="success"]::after {
  border-color: #16a34a;
  background: rgba(22, 163, 74, 0.1);
}

.emoji-static-feedback[data-state="error"]::after {
  border-color: #dc2626;
  background: rgba(220, 38, 38, 0.1);
}

.emoji-static-feedback[data-state="warning"]::after {
  border-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}
